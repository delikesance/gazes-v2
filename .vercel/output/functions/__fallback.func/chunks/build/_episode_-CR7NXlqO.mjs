import { b as Ct, u as Ae, _ as bt, n as Oe } from './server.mjs';
import { _ as $ } from './index-BZnvd90h.mjs';
import { defineComponent, ref, computed, watch, nextTick, mergeProps, withCtx, createVNode, useSSRContext } from 'vue';
import { ssrRenderAttrs, ssrRenderClass, ssrRenderComponent, ssrInterpolate, ssrRenderList, ssrRenderStyle, ssrRenderAttr, ssrIncludeBooleanAttr } from 'vue/server-renderer';
import { a8 as formatSeasonDisplay } from '../nitro/nitro.mjs';
import 'vue-router';
import '@iconify/vue';
import 'cheerio';
import 'jsonwebtoken';
import 'bcryptjs';
import 'node:http';
import 'node:https';
import 'node:events';
import 'node:buffer';
import 'node:fs';
import 'node:path';
import 'node:crypto';
import '@supabase/supabase-js';
import '@iconify/utils';
import 'consola';
import 'node:url';
import 'ipx';
import '@iconify/utils/lib/css/icon';
import './asyncData-BOLdWyFS.mjs';
import 'perfect-debounce';
import '../routes/renderer.mjs';
import 'vue-bundle-renderer/runtime';
import 'unhead/server';
import 'devalue';
import 'unhead/plugins';
import 'unhead/utils';

const z=18e5,L=defineComponent({__name:"[episode]",__ssrInlineRender:true,setup(l){let s=null,p=null;const m=Ae(),L=ref(m.params.id),C=ref(m.params.season),S=ref(m.params.lang),T=ref(Number(m.params.episode)),U=computed(()=>"1"===m.query.debug||"true"===m.query.debug),j=computed(()=>"true"===m.query.continue),V=ref(true),E=ref(""),R=ref(0),A=ref(false),F=ref(""),M=ref([]),q=ref(""),P=ref(null),I=ref(""),_=ref(false),N=ref(false),K=ref(0),D=ref(0),H=ref(1),B=ref(false),O=ref(false),J=ref(true),Q=ref(null),G=ref(false),W=ref(0),X=ref(false),Y=ref(false);let Z=null,ee=0;function ae(){const e=Date.now();if(e-ee<100)return void(Z=requestAnimationFrame(ae));const a=P.value;if(a&&!a.paused&&!a.ended){const t=a.currentTime,l=a.buffered.length>0?a.buffered.end(a.buffered.length-1):0;Math.abs(t-K.value)>.1&&(K.value=t),Math.abs(l-W.value)>.5&&(W.value=l),ee=e,Z=requestAnimationFrame(ae);}}function te(){Z&&(cancelAnimationFrame(Z),Z=null);}const le=ref(false),oe=ref([]),se=ref(false),ne=ref({});ref({}),ref({});const ie=ref({});const re=ref(null),ce=ref(null),de=ref(0),ue=ref({vostfr:false,vf:false,va:false,var:false,vkr:false,vcn:false,vqc:false,vf1:false,vf2:false,vj:false}),ve=ref(false),pe=ref(false),me=computed(()=>{const e=[];if(ue.value.vostfr){const a=we.value.vostfr||"ÔøΩÔøΩüá≥";e.push({code:"vostfr",label:`${a} VOSTFR`,fullLabel:"Version Originale Sous-Titr√©e Fran√ßais"});}if(ue.value.vf){const a=we.value.vf||"üá´üá∑";e.push({code:"vf",label:`${a} VF`,fullLabel:"Version Fran√ßaise"});}if(ue.value.va){const a=we.value.va||"üá∫üá∏";e.push({code:"va",label:`${a} VA`,fullLabel:"Version Anglaise"});}if(ue.value.var){const a=we.value.var||"üá∏üá¶";e.push({code:"var",label:`${a} VAR`,fullLabel:"Version Arabe"});}if(ue.value.vkr){const a=we.value.vkr||"üá∞üá∑";e.push({code:"vkr",label:`${a} VKR`,fullLabel:"Version Cor√©enne"});}if(ue.value.vcn){const a=we.value.vcn||"üá®üá≥";e.push({code:"vcn",label:`${a} VCN`,fullLabel:"Version Chinoise"});}if(ue.value.vqc){const a=we.value.vqc||"üá®üá¶";e.push({code:"vqc",label:`${a} VQC`,fullLabel:"Version Qu√©b√©coise"});}if(ue.value.vf1){const a=we.value.vf1||"üá´üá∑";e.push({code:"vf1",label:`${a} VF1`,fullLabel:"Version Fran√ßaise 1"});}if(ue.value.vf2){const a=we.value.vf2||"üá´üá∑";e.push({code:"vf2",label:`${a} VF2`,fullLabel:"Version Fran√ßaise 2"});}if(ue.value.vj){const a=we.value.vj||"üáØüáµ";e.push({code:"vj",label:`${a} VJ`,fullLabel:"Version Japonaise"});}return e}),be=computed(()=>me.value.find(e=>e.code===S.value)||{label:S.value.toUpperCase(),fullLabel:S.value.toUpperCase()}),fe=computed(()=>formatSeasonDisplay(C.value)),ge=computed(()=>`√âpisode ${T.value.toString().padStart(2,"0")}`),he=ref(""),xe=ref(""),we=ref({}),ye=ref([]),$e=ref(true),ke=ref(false),ze=ref(null),Le=ref(null);async function Ce(e,a){if(a<10)return;const t=Date.now();if(!(t-de.value<5e3))try{await $fetch(`/api/watch/progress/${L.value}`,{method:"POST",body:{season:C.value,episode:T.value,currentTime:e,duration:a}}),de.value=t,console.log("üíæ Progress saved:",{currentTime:e,duration:a});}catch(l){console.warn("Failed to save progress:",l);}}function Se(){ce.value&&clearInterval(ce.value),ce.value=void console.error("[nuxt] `setInterval` should not be used on the server. Consider wrapping it with an `onNuxtReady`, `onBeforeMount` or `onMounted` lifecycle hook, or ensure you only call it in the browser by checking `false`.");}const Te=computed(()=>D.value>0?K.value/D.value*100:0),Ue=computed(()=>D.value>0?W.value/D.value*100:0);let je=null;function Ve(e){return /\.m3u8(\?.*)?$/i.test(e)}let Ee=null;function Re(){try{je&&(Ee&&(clearTimeout(Ee),Ee=null),Xe&&(clearTimeout(Xe),Xe=null),je.dispose());}catch(e){console.warn("Error destroying player:",e);}je=null,te(),He(P.value);}function Ae$1(e){const a=Math.floor(e/3600),t=Math.floor(e%3600/60),l=Math.floor(e%60);return a>0?`${a}:${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`:`${t}:${l.toString().padStart(2,"0")}`}function Fe(){console.log("Video play event - clearing loading state and autoplay error"),N.value=true,_.value=false,I.value&&I.value.includes("Cliquez")&&(I.value=""),Z&&cancelAnimationFrame(Z),ae(),Se(),J.value=true,Q.value&&clearTimeout(Q.value),Q.value=setTimeout(()=>{N.value&&!G.value&&(J.value=false);},3e3);}function Me(){N.value=false,te(),ce.value&&(clearInterval(ce.value),ce.value=null),D.value>0&&Ce(K.value,D.value),J.value=true;}function qe(){!function(){const e=P.value;if(!e)return;Z||(K.value=e.currentTime,e.buffered.length>0&&(W.value=e.buffered.end(e.buffered.length-1)));!function(){if(!$e.value||0===ye.value.length)return;const e=K.value;let a=false,t=null;for(const l of ye.value){const o=l.startTime-e;if(l.endTime,e>=l.startTime&&e<l.endTime){a=true,t=l.type,console.log(`‚è≠Ô∏è [SKIP] Currently in ${l.type.toUpperCase()} period (${e.toFixed(1)}s of ${l.startTime.toFixed(1)}s-${l.endTime.toFixed(1)}s)`);break}if(o>0&&o<=3){a=true,t=l.type,console.log(`‚è≠Ô∏è [SKIP] Approaching ${l.type.toUpperCase()} start in ${o.toFixed(1)}s`);break}}a&&!ke.value?(ke.value=true,ze.value=t,console.log(`‚è≠Ô∏è [SKIP] Showing skip buttons for ${t?.toUpperCase()}`),Le.value=setTimeout(()=>{console.log("‚è≠Ô∏è [SKIP] Auto-hiding skip buttons (timeout)"),Je();},1e4)):!a&&ke.value&&(console.log("‚è≠Ô∏è [SKIP] Hiding skip buttons (no longer in skip period)"),Je());}();}();}function Pe(){Oe$1();}function Ie(){!function(){if(je)H.value=je.volume(),B.value=je.muted();else {const e=P.value;if(!e)return;H.value=e.volume,B.value=e.muted;}}();}function _e(){X.value=true;const e=P.value;e&&!e.paused?(Y.value=true,e.pause()):Y.value=false;}function Ne(){X.value=false;const e=P.value;e&&Y.value&&e.paused&&e.play().catch(e=>{console.log("Auto-resume after seek failed:",e);});}function Ke(e){const a=e.target,t=a?.error;I.value="Erreur de chargement vid√©o",_.value=false,Ze(t,"native");}function De(){N.value=false,J.value=true,D.value>0&&(console.log("üé¨ Episode ended, marking as completed"),Ce(D.value,D.value));}function He(e){e&&(e.removeEventListener("play",Fe),e.removeEventListener("pause",Me),e.removeEventListener("timeupdate",qe),e.removeEventListener("loadedmetadata",Pe),e.removeEventListener("volumechange",Ie),e.removeEventListener("seeking",_e),e.removeEventListener("seeked",Ne),e.removeEventListener("ended",De),e.removeEventListener("error",Ke));}function Be(){const e=P.value;e&&(He(e),function(e){e&&(e.addEventListener("play",Fe,{passive:true}),e.addEventListener("pause",Me,{passive:true}),e.addEventListener("timeupdate",qe,{passive:true}),e.addEventListener("loadedmetadata",Pe,{passive:true}),e.addEventListener("volumechange",Ie,{passive:true}),e.addEventListener("seeking",_e,{passive:true}),e.addEventListener("seeked",Ne,{passive:true}),e.addEventListener("ended",De,{passive:true}),e.addEventListener("error",Ke,{passive:true}));}(e));}function Oe$1(){if(je)D.value=je.duration(),H.value=je.volume(),B.value=je.muted(),N.value=!je.paused();else {const e=P.value;if(!e)return;D.value=e.duration,H.value=e.volume,B.value=e.muted,N.value=!e.paused;}if(async function(){const e=`${L.value}-${T.value}`,a=function(e){const a=ie.value[e];return a&&Date.now()-a.timestamp<z?(a.accessCount++,console.log("‚è≠Ô∏è Using cached skip times for:",e,`(accessed ${a.accessCount} times)`),a.data):null}(e);if(a)return void(ye.value=a.skipTimes||[]);try{console.log("‚è≠Ô∏è [SKIP] Loading skip times for anime:",L.value,"episode:",T.value,"duration:",D.value);const a=D.value>0?{episodeLength:D.value}:{},t=await $fetch(`/api/anime/${L.value}/skip/${T.value}`,{params:a});t?.skipTimes&&Array.isArray(t.skipTimes)?(ye.value=t.skipTimes,console.log("‚è≠Ô∏è [SKIP] Successfully loaded skip times:",ye.value.length,"entries"),console.log("‚è≠Ô∏è [SKIP] Skip times details:",ye.value),function(e,a){ie.value[e]={data:a,timestamp:Date.now(),accessCount:1},console.log("‚è≠Ô∏è Cached skip times for:",e);}(e,t)):(ye.value=[],console.log("‚è≠Ô∏è [SKIP] No skip times found for this episode"));}catch(t){console.warn("‚è≠Ô∏è [SKIP] Failed to load skip times:",t),ye.value=[];}}(),re.value&&re.value.duration>0){const e=re.value.currentTime,a=je?je.currentTime():P.value?.currentTime||0;(j.value||a<5)&&(console.log("üì∫ Resuming from saved progress:",e,"seconds",j.value?"(continue watching)":"(at start)"),je?je.currentTime(e):P.value&&(P.value.currentTime=e),K.value=e,j.value&&(q.value=`Repris √† ${Math.floor(e/60)}:${String(Math.floor(e%60)).padStart(2,"0")}`,setTimeout(()=>{q.value="";},3e3),setTimeout(()=>{je&&!je.playing()?je.play().catch(e=>{console.log("Continue watching autoplay failed, user interaction required");}):P.value&&P.value.paused&&P.value.play().catch(e=>{console.log("Continue watching autoplay failed, user interaction required");});},500)));}}function Je(){console.log("‚è≠Ô∏è [SKIP] Hiding skip buttons"),ke.value=false,ze.value=null,Le.value&&(clearTimeout(Le.value),Le.value=null);}let Qe=0,Ge=0,We="",Xe=null;async function Ye(){const e=P.value;if(e&&E.value){if(Qe>2)return console.error("setupVideo: Too many attempts, giving up"),I.value="Impossible de charger la vid√©o apr√®s plusieurs tentatives",void(_.value=false);Qe++,I.value="",_.value=true,N.value=false,e.pause(),Re(),e.removeAttribute("src"),e.load(),console.log(`setupVideo: Attempt ${Qe} - Setting up video with URL:`,E.value),console.log("setupVideo: Is M3U8:",Ve(E.value));try{if(Ve(E.value)){const a=await(async()=>s||p||(p=import('../_/video.cjs.mjs').then(function (n) { return n.v; }).then(async e=>(s=e.default,s)),p))();je=a(e,{controls:!1,autoplay:!0,muted:!1,preload:"metadata",html5:{hls:{overrideNative:!0,enableLowInitialPlaylist:!0,smoothQualityChange:!0,maxBufferLength:30,maxMaxBufferLength:600,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,seekHoleNudgeDuration:.1,levelLoadingMaxRetry:4,levelLoadingMaxRetryTimeout:4e3,fragLoadingMaxRetry:6,fragLoadingMaxRetryTimeout:4e3,enableWorker:!0,startLevel:-1,debug:U.value},nativeAudioTracks:!1,nativeVideoTracks:!1},liveui:!1,responsive:!0,fluid:!0}),Be(),je.on("error",e=>{console.error("Video.js error:",e);const a=je.error();a&&(I.value=`Erreur vid√©o: ${a.message||"Unknown error"}`,_.value=!1,Ze(a,"videojs"));}),je.on("loadedmetadata",()=>{console.log("Video.js loadedmetadata"),Oe$1();}),je.on("canplay",()=>{console.log("Video.js canplay"),_.value=!1;}),je.on("waiting",()=>{console.log("Video.js waiting"),_.value=!0;}),je.on("playing",()=>{console.log("Video.js playing"),_.value=!1;}),je.src({src:E.value,type:"application/x-mpegURL"}),je.load(),je.play().catch(e=>{console.log("Autoplay prevented by browser, video will start paused"),_.value=!1;}),Ee=setTimeout(()=>{console.warn("HLS loading timeout, trying next source"),Re(),I.value="Timeout lors du chargement de la vid√©o HLS",_.value=!1,setTimeout(()=>{ea();},500);},1e4);}else {console.log("Using native video element for MP4"),e.src=E.value,e.autoplay=!0,Be();const a=()=>{console.log("Native video canplay"),_.value=!1,e.removeEventListener("canplay",a);},t=()=>{console.log("Native video loadeddata"),_.value=!1,e.removeEventListener("loadeddata",t);},l=a=>{console.error("Native video error:",a),I.value="Erreur de chargement vid√©o",_.value=!1,e.removeEventListener("error",l);};e.addEventListener("canplay",a),e.addEventListener("loadeddata",t),e.addEventListener("error",l),e.play().catch(e=>{console.log("Autoplay prevented by browser, waiting for user interaction"),_.value=!1;});setTimeout(()=>{_.value&&(console.warn("Safety timeout: clearing loading state after 10 seconds (native)"),_.value=!1);},1e4);}}catch(a){console.error("Setup video error:",a);const e=a instanceof Error?a.message:"Unknown error";I.value=`Erreur lors de la configuration vid√©o: ${e}`,_.value=false;}}else console.warn("setupVideo: Missing video element or playUrl");}function Ze(e,a="unknown"){console.error(`Video error (${a}):`,e),Xe&&(clearTimeout(Xe),Xe=null);We!==a&&(We=a,Ge=0);const t=function(e){if(!e)return  false;const a=e.code||e.status||0,t=(e.message||"").toLowerCase();return !!(a>=500||t.includes("network")||t.includes("timeout")||t.includes("connection")||t.includes("fetch"))||!!(t.includes("frag")||t.includes("segment")||t.includes("buffer")||t.includes("manifest"))||!(0!==a&&!t.includes("cors")&&!t.includes("blocked"))}(e);t&&Ge<2?(Ge++,console.log(`üîÑ Retrying same source (attempt ${Ge}/2) for recoverable error`),I.value=`Nouvelle tentative ${Ge}/2...`,_.value=true,Xe=setTimeout(()=>{Ye();},2e3*Ge)):(console.log(`‚ùå ${t?"Max retries reached":"Non-recoverable error"}, trying next source`),ea());}function ea(){if(M.value.length<=1)return void(I.value="Aucune source alternative disponible");const e=R.value;if(R.value=(R.value+1)%M.value.length,R.value===e)return console.log("Tried all sources, giving up"),void(I.value="Toutes les sources vid√©o ont √©chou√©");const a=M.value[R.value];a&&(Qe=0,Ge=0,We="",E.value=a.proxiedUrl||a.url,I.value="",_.value=true,Ye());}async function aa(e,a=2){for(let l=1;l<=a;l++)try{const a=await $fetch(`/api/anime/episodes/${L.value}/${C.value}/${e}`);return a?.episodes||[]}catch(t){if(console.warn(`Episode fetch attempt ${l}/${a} failed for ${e}:`,t),l===a)throw t;const o=Math.min(500*Math.pow(2,l-1),2e3);await new Promise(e=>setTimeout(e,o));}throw new Error("Max retries exceeded")}async function ta(){A.value=true,F.value="",q.value="",E.value="",M.value=[],Qe=0,Ge=0,We="";const e=(a=L.value,l=C.value,o=S.value,s=T.value,`${a}-${l}-${o}-${s}`);var a,l,o,s;console.log(`üé¨ Resolving episode: ${L.value}/${C.value}/${S.value}/${T.value}`);const n=function(e){const a=ne.value[e];return a&&Date.now()-a.timestamp<z?(a.accessCount++,console.log("üéØ Using cached URLs for:",e,`(accessed ${a.accessCount} times)`),a.urls):null}(e);if(n){console.log("‚úÖ Using cached resolved URLs"),M.value=n,R.value=0;const e=n.find(e=>"hls"===e.type)||n[0];return E.value=e.proxiedUrl||e.url,void(A.value=false)}try{const a=[S.value,"vostfr","vf","va"],l=a.map(e=>aa(e,2).then(a=>({lang:e,episodes:a})).catch(()=>({lang:e,episodes:[]}))),o=await Promise.all(l);o.forEach(({lang:e,episodes:a})=>{ue.value[e]=a.length>0;});const s=o.find(e=>e.lang===S.value);let n=s?.episodes.find(e=>Number(e.episode)===T.value);if(console.log(`üéØ Looking for episode ${T.value} in ${S.value}, found:`,n?`Episode ${n.episode}`:"Not found"),!n){const e=["var","vkr","vcn","vqc","vf1","vf2","vj"].filter(e=>!a.includes(e)).map(e=>aa(e,2).then(a=>({lang:e,episodes:a})).catch(()=>({lang:e,episodes:[]}))),l=await Promise.all(e);l.forEach(({lang:e,episodes:a})=>{ue.value[e]=a.length>0;});for(const{lang:a,episodes:o}of l)if(a!==S.value&&o.length>0){if(o.find(e=>Number(e.episode)===T.value))return console.log(`üîÑ Found episode ${T.value} in ${a}, switching...`),q.value=`Langue ${S.value.toUpperCase()} indisponible. Basculement en ${a.toUpperCase()}.`,void(await Oe({path:`/watch/${L.value}/${C.value}/${a}/${T.value}`,query:{fallback:"1"},replace:!0}))}console.log(`‚ùå Episode ${T.value} not found in any available language`);}if(!n)return void(F.value=`√âpisode ${T.value.toString().padStart(2,"0")} introuvable pour ${S.value.toUpperCase()}`);let r=n?.urls?.length?n.urls:n?.url?[n.url]:[];if(!r.length)return void(F.value="Aucun lien pour cet √©pisode");r=r.sort((e,a)=>{const t=e=>{try{const a=new URL(e).hostname.toLowerCase();return a.includes("sibnet")?10:a.includes("streamtape")?8:a.includes("vidmoly")?7:a.includes("uqload")?5:a.includes("doodstream")?4:a.includes("myvi")?3:a.includes("sendvid")?1:0}catch{return 0}};return t(a)-t(e)}),console.log(`üéØ Sorted ${r.length} candidates by reliability:`,r.map(e=>{try{return `${new URL(e).hostname} (${e})`}catch{return e}}));let c=[],d="";for(let e=0;e<Math.min(r.length,3);e++){const a=r[e];if(a){console.log(`üéØ Trying candidate ${e+1}/${Math.min(r.length,3)}: ${a}`);try{const t=(new TextEncoder).encode(a),l=btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");let o;try{o=new URL(a).origin+"/";}catch{}const s=await $fetch("/api/player/resolve",{params:{u64:l,referer:o,...U.value?{debug:"1"}:{}},timeout:4e3});if(s?.ok&&s?.urls?.length>0){console.log(`‚úÖ Successfully resolved candidate ${e+1}: ${s.urls.length} URLs found`),c=s.urls;break}{const a=s?.message||"No URLs found";console.warn(`‚ùå Candidate ${e+1} failed: ${a}`),d=a;}}catch(i){const a=i?.message||"Network error";console.warn(`‚ùå Candidate ${e+1} error: ${a}`),d=a;}}}try{const e=await Promise.allSettled(resolvePromises);for(const a of e)if("fulfilled"===a.status&&a.value){c=a.value;break}if(0===c.length){const a=e.filter(e=>"rejected"===e.status).map(e=>e.reason?.message||"Unknown error");d=a.length>0?a.join(", "):"All candidates failed";}}catch(i){d=i?.message||"Parallel resolution failed",console.error("‚ùå Parallel resolution error:",i);}if(0===c.length)return void(F.value=d||"Toutes les sources ont √©chou√©");M.value=c,R.value=0;const u=c.find(e=>"hls"===e.type)||c[0];E.value=u.proxiedUrl||u.url,function(e,a){const t=Object.entries(ne.value);if(t.length>=20){const e=t.reduce((e,[a,t])=>t.accessCount<e.accessCount||t.accessCount===e.accessCount&&t.timestamp<e.timestamp?{key:a,...t}:e,{key:"",accessCount:1/0,timestamp:1/0});e.key&&(delete ne.value[e.key],console.log("üóëÔ∏è Evicted cache entry:",e.key));}ne.value[e]={urls:a,timestamp:Date.now(),accessCount:1},console.log("üíæ Cached URLs for:",e);}(e,c),function(){try{sessionStorage.setItem("video-url-cache",JSON.stringify(ne.value));}catch(i){console.warn("Failed to save URL cache:",i);}}();}catch(r){F.value=r?.message||"Erreur de r√©solution";}finally{A.value=false;}}watch([V,E],async()=>{V.value?(await nextTick(),Ye()):Re();});let la=null,oa="";return watch([C,S,T],()=>{la&&clearTimeout(la),la=setTimeout(()=>{const e=`${L.value}-${C.value}-${S.value}-${T.value}`;e!==oa&&(oa=e,ue.value={vostfr:false,vf:false,va:false,var:false,vkr:false,vcn:false,vqc:false,vf1:false,vf2:false,vj:false},ta());},100);}),watch([T,oe],()=>{const e=oe.value.find(e=>e.episode===T.value),a=e?.title||ge.value;a!==xe.value&&(xe.value=a);},{immediate:true}),(e,t,l,s)=>{const n=bt,i=$;t(`<div${ssrRenderAttrs(mergeProps({class:"fixed inset-0 bg-black z-50 flex flex-col h-screen overflow-hidden"},s))} data-v-cc3ad26b><div class="${ssrRenderClass([J.value?"opacity-100":"opacity-0","absolute top-0 left-0 right-0 z-20 transition-opacity duration-300"])}" data-v-cc3ad26b><div class="bg-gradient-to-b from-black/80 via-black/40 to-transparent p-4 md:p-6" data-v-cc3ad26b><div class="flex items-center justify-between text-white" data-v-cc3ad26b><div class="flex items-center gap-4" data-v-cc3ad26b>`),t(ssrRenderComponent(n,{to:`/anime/${L.value}`,class:"flex items-center gap-2 hover:text-zinc-300 transition-colors"},{default:withCtx((e,a,t,l)=>{if(!a)return [createVNode(i,{name:"heroicons:arrow-left",class:"w-5 h-5"}),createVNode("span",{class:"text-sm font-medium"},"Retour")];a(ssrRenderComponent(i,{name:"heroicons:arrow-left",class:"w-5 h-5"},null,t,l)),a(`<span class="text-sm font-medium" data-v-cc3ad26b${l}>Retour</span>`);}),_:1},l)),t(`<div class="h-5 w-px bg-white/30" data-v-cc3ad26b></div><div class="flex flex-col" data-v-cc3ad26b><div class="text-base font-medium text-white" data-v-cc3ad26b>${ssrInterpolate(he.value||`Anime ${L.value}`)}</div><div class="text-sm text-zinc-300" data-v-cc3ad26b>${ssrInterpolate(xe.value||ge.value)} ‚Ä¢ ${ssrInterpolate(fe.value)} ‚Ä¢ ${ssrInterpolate(S.value.toUpperCase())}</div></div></div><div class="flex items-center gap-2" data-v-cc3ad26b>`),M.value.length>1?(t('<button class="p-2 hover:bg-white/10 rounded-full transition-colors" title="Source alternative" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:arrow-path",class:"w-5 h-5"},null,l)),t("</button>")):t("\x3c!----\x3e"),t("</div></div>"),q.value?t(`<div class="mt-3 px-4 py-2 bg-amber-600/90 rounded-lg text-amber-100 text-sm" data-v-cc3ad26b>${ssrInterpolate(q.value)}</div>`):t("\x3c!----\x3e"),t('</div></div><div class="flex-1 relative bg-black min-h-0" data-v-cc3ad26b>'),A.value?t('<div class="absolute inset-0 flex items-center justify-center text-white" data-v-cc3ad26b><div class="flex flex-col items-center justify-center text-white" data-v-cc3ad26b><div class="w-16 h-16 border-2 border-white/20 border-t-white rounded-full animate-spin mb-4 mx-auto" data-v-cc3ad26b></div><p class="text-lg font-medium text-center" data-v-cc3ad26b>Chargement de l&#39;√©pisode</p></div></div>'):F.value?(t('<div class="absolute inset-0 flex items-center justify-center text-white" data-v-cc3ad26b><div class="text-center max-w-md px-6" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:exclamation-triangle",class:"w-16 h-16 mx-auto mb-4 text-red-400"},null,l)),t(`<h3 class="text-xl font-semibold mb-2" data-v-cc3ad26b>Impossible de charger l&#39;√©pisode</h3><p class="text-zinc-300 mb-6" data-v-cc3ad26b>${ssrInterpolate(F.value)}</p><button class="bg-white text-black px-6 py-3 rounded-lg font-medium hover:bg-zinc-200 transition-colors" data-v-cc3ad26b> R√©essayer </button></div></div>`)):(t('<div class="w-full h-full relative" data-v-cc3ad26b>'),_.value?t('<div class="absolute inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-30" data-v-cc3ad26b><div class="flex flex-col items-center justify-center text-white" data-v-cc3ad26b><div class="w-16 h-16 border-2 border-white/20 border-t-white rounded-full animate-spin mb-4 mx-auto" data-v-cc3ad26b></div><p class="text-lg font-medium text-center" data-v-cc3ad26b>Chargement de la vid√©o</p></div></div>'):t("\x3c!----\x3e"),t('<video class="w-full h-full object-contain cursor-pointer" preload="metadata" autoplay data-v-cc3ad26b> Votre navigateur ne supporte pas la lecture vid√©o. Veuillez utiliser un navigateur moderne. </video>'),le.value?(t(`<div class="absolute right-4 bottom-24 w-96 max-h-[32rem] bg-zinc-900/95 backdrop-blur-sm border border-zinc-700 rounded-lg overflow-hidden z-30 shadow-2xl" data-v-cc3ad26b><div class="flex items-center justify-between p-4 border-b border-zinc-700" data-v-cc3ad26b><div data-v-cc3ad26b><h3 class="text-white font-semibold text-lg" data-v-cc3ad26b>√âpisodes</h3><p class="text-zinc-400 text-sm" data-v-cc3ad26b>${ssrInterpolate(fe.value)} ‚Ä¢ ${ssrInterpolate(S.value.toUpperCase())}</p></div><button class="text-zinc-400 hover:text-white transition-colors p-1 hover:bg-white/10 rounded" data-v-cc3ad26b>`),t(ssrRenderComponent(i,{name:"heroicons:x-mark",class:"w-5 h-5"},null,l)),t('</button></div><div class="max-h-80 overflow-y-auto custom-scrollbar" data-v-cc3ad26b>'),se.value?t('<div class="p-6 text-center text-zinc-400" data-v-cc3ad26b><div class="w-8 h-8 border-2 border-zinc-400 border-t-transparent rounded-full animate-spin mx-auto mb-3" data-v-cc3ad26b></div><p data-v-cc3ad26b>Chargement des √©pisodes...</p></div>'):0===oe.value.length?(t('<div class="p-6 text-center text-zinc-400" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:exclamation-triangle",class:"w-12 h-12 mx-auto mb-3 text-zinc-500"},null,l)),t("<p data-v-cc3ad26b>Aucun √©pisode trouv√©</p></div>")):(t('<div class="divide-y divide-zinc-800" data-v-cc3ad26b>\x3c!--[--\x3e'),ssrRenderList(oe.value,(e,a)=>{t(`<button class="${ssrRenderClass([e.episode===T.value?"bg-violet-600/10 border-l-4 border-violet-500":"hover:border-l-4 hover:border-zinc-600","w-full p-4 text-left hover:bg-zinc-800/50 transition-all duration-200 flex items-center gap-4 group relative"])}" data-v-cc3ad26b><div class="flex-shrink-0 w-20 h-12 bg-zinc-800 rounded-md overflow-hidden flex items-center justify-center relative group-hover:bg-zinc-700 transition-colors" data-v-cc3ad26b><span class="text-white font-bold text-lg" data-v-cc3ad26b>${ssrInterpolate(e.episode.toString().padStart(2,"0"))}</span>`),e.episode===T.value?(t('<div class="absolute inset-0 bg-violet-600/20 flex items-center justify-center" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:play-circle",class:"w-6 h-6 text-violet-400"},null,l)),t("</div>")):(t('<div class="absolute inset-0 bg-black/0 group-hover:bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:play",class:"w-5 h-5 text-white"},null,l)),t("</div>")),t(`</div><div class="flex-1 min-w-0" data-v-cc3ad26b><div class="flex items-center gap-2 mb-1" data-v-cc3ad26b><h4 class="text-white font-medium text-base" data-v-cc3ad26b>${ssrInterpolate(e.title||`√âpisode ${e.episode.toString().padStart(2,"0")}`)}</h4>`),e.episode===T.value?t('<span class="text-xs bg-violet-600 text-white px-2 py-1 rounded-full font-medium" data-v-cc3ad26b> En cours </span>'):t("\x3c!----\x3e"),t(`</div><p class="text-zinc-400 text-sm" data-v-cc3ad26b>${ssrInterpolate(e.episode===T.value?"Vous regardez actuellement cet √©pisode":e.title?`√âpisode ${e.episode.toString().padStart(2,"0")} ‚Ä¢ ${C.value}`:`√âpisode ${e.episode.toString().padStart(2,"0")} de la saison ${C.value}`)}</p></div><div class="flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity" data-v-cc3ad26b>`),t(ssrRenderComponent(i,{name:"heroicons:chevron-right",class:"w-5 h-5 text-zinc-400"},null,l)),t("</div></button>");}),t("\x3c!--]--\x3e</div>")),t("</div></div>")):t("\x3c!----\x3e"),t(`<div class="${ssrRenderClass([J.value?"opacity-100":"opacity-0","absolute bottom-0 left-0 right-0 transition-opacity duration-300 pointer-events-none z-20"])}" data-v-cc3ad26b><div class="bg-gradient-to-t from-black/90 via-black/60 to-transparent px-4 pb-4 pt-8 md:px-6 md:pb-6 pointer-events-auto" data-v-cc3ad26b><div class="mb-3" data-v-cc3ad26b><div class="${ssrRenderClass([{"opacity-75":X.value},"relative h-1 bg-white/20 rounded-full cursor-pointer hover:h-2 transition-all duration-200"])}" data-v-cc3ad26b>`),X.value?t('<div class="absolute inset-0 bg-blue-500/20 rounded-full flex items-center justify-center" data-v-cc3ad26b><div class="flex items-center gap-2 text-white text-xs" data-v-cc3ad26b><div class="w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin" data-v-cc3ad26b></div><span data-v-cc3ad26b>Chargement...</span></div></div>'):t("\x3c!----\x3e"),t(`<div class="absolute top-0 left-0 h-full bg-white/40 rounded-full" style="${ssrRenderStyle({width:Ue.value+"%"})}" data-v-cc3ad26b></div><div class="absolute top-0 left-0 h-full bg-violet-600 rounded-full transition-all duration-100" style="${ssrRenderStyle({width:Te.value+"%"})}" data-v-cc3ad26b></div><div class="absolute top-1/2 transform -translate-y-1/2 w-3 h-3 bg-violet-600 rounded-full opacity-0 hover:opacity-100 transition-opacity duration-200" style="${ssrRenderStyle({left:Te.value+"%",marginLeft:"-6px"})}" data-v-cc3ad26b></div></div></div><div class="flex items-center justify-between text-white" data-v-cc3ad26b><div class="flex items-center gap-3" data-v-cc3ad26b><button class="p-2 hover:bg-white/10 rounded-full transition-colors" data-v-cc3ad26b>`),t(ssrRenderComponent(i,{name:N.value?"heroicons:pause":"heroicons:play",class:"w-6 h-6"},null,l)),t('</button><button class="p-2 hover:bg-white/10 rounded-full transition-colors" title="Reculer 10s" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:backward",class:"w-5 h-5"},null,l)),t('</button><button class="p-2 hover:bg-white/10 rounded-full transition-colors" title="Avancer 10s" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:forward",class:"w-5 h-5"},null,l)),t('</button><button class="p-2 hover:bg-white/10 rounded-full transition-colors" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:B.value||0===H.value?"heroicons:speaker-x-mark":H.value<.5?"heroicons:speaker":"heroicons:speaker-wave",class:"w-5 h-5"},null,l)),t(`</button><div class="w-16 h-1 bg-white/20 rounded-full relative group" data-v-cc3ad26b><div class="h-full bg-violet-600 rounded-full" style="${ssrRenderStyle({width:100*H.value+"%"})}" data-v-cc3ad26b></div><input type="range" min="0" max="1" step="0.1"${ssrRenderAttr("value",H.value)} class="absolute inset-0 w-full opacity-0 cursor-pointer" data-v-cc3ad26b></div><div class="text-sm text-zinc-300 whitespace-nowrap" data-v-cc3ad26b>${ssrInterpolate(Ae$1(K.value))} / ${ssrInterpolate(Ae$1(D.value))}</div></div><div class="flex items-center gap-2" data-v-cc3ad26b>`),me.value.length>1?(t(`<div class="relative" data-v-cc3ad26b><button${ssrIncludeBooleanAttr(ve.value)?" disabled":""} class="flex items-center gap-1 px-3 py-1 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-sm font-medium"${ssrRenderAttr("title","Changer de langue")} data-v-cc3ad26b>`),ve.value?t('<span class="inline-block w-3 h-3 border border-current border-t-transparent rounded-full animate-spin" data-v-cc3ad26b></span>'):t(`<span data-v-cc3ad26b>${ssrInterpolate(be.value.label)}</span>`),t(ssrRenderComponent(i,{name:"heroicons:chevron-down",class:["w-3 h-3 transition-transform",{"rotate-180":pe.value}]},null,l)),t("</button>"),pe.value?(t('<div class="absolute bottom-full right-0 mb-2 bg-zinc-800 border border-zinc-700 rounded-lg shadow-lg z-50 w-80 overflow-hidden" data-v-cc3ad26b><div class="py-1" data-v-cc3ad26b>\x3c!--[--\x3e'),ssrRenderList(me.value,e=>{t(`<button${ssrIncludeBooleanAttr(e.code===S.value)?" disabled":""} class="${ssrRenderClass([{"bg-zinc-700 text-white":e.code===S.value,"text-zinc-300":e.code!==S.value},"w-full px-3 py-2 text-left text-sm hover:bg-zinc-700 transition-colors flex items-center gap-2 whitespace-nowrap"])}" data-v-cc3ad26b><span data-v-cc3ad26b>${ssrInterpolate(e.label)}</span><span class="text-xs opacity-75 flex-1" data-v-cc3ad26b>${ssrInterpolate(e.fullLabel)}</span>`),e.code===S.value?t(ssrRenderComponent(i,{name:"heroicons:check",class:"w-4 h-4 ml-auto"},null,l)):t("\x3c!----\x3e"),t("</button>");}),t("\x3c!--]--\x3e</div></div>")):t("\x3c!----\x3e"),t("</div>")):t("\x3c!----\x3e"),t(`<button class="${ssrRenderClass([$e.value?"text-violet-400":"text-zinc-400","p-2 hover:bg-white/10 rounded-full transition-colors"])}"${ssrRenderAttr("title",$e.value?"D√©sactiver le saut automatique":"Activer le saut automatique")} data-v-cc3ad26b>`),t(ssrRenderComponent(i,{name:"heroicons:forward",class:"w-5 h-5"},null,l)),t("</button>"),U.value&&M.value.length>1?(t('<button class="p-2 hover:bg-white/10 rounded-full transition-colors" title="Sources" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:cog-6-tooth",class:"w-5 h-5"},null,l)),t("</button>")):t("\x3c!----\x3e"),t('<button class="p-2 hover:bg-white/10 rounded-full transition-colors" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:O.value?"heroicons:arrows-pointing-in":"heroicons:arrows-pointing-out",class:"w-5 h-5"},null,l)),t("</button></div></div></div></div>"),I.value?(t('<div class="absolute inset-0 bg-black/80 flex items-center justify-center z-40" data-v-cc3ad26b><div class="text-center text-white max-w-md px-6" data-v-cc3ad26b>'),t(ssrRenderComponent(i,{name:"heroicons:exclamation-triangle",class:"w-12 h-12 mx-auto mb-3 text-red-400"},null,l)),t(`<h4 class="text-lg font-medium mb-2" data-v-cc3ad26b>${ssrInterpolate(I.value)}</h4><div class="text-sm text-zinc-400 mb-4 break-all" data-v-cc3ad26b>${ssrInterpolate(E.value)}</div><div class="flex flex-wrap gap-2 justify-center" data-v-cc3ad26b><button class="bg-white text-black px-4 py-2 rounded font-medium hover:bg-zinc-200 transition-colors" data-v-cc3ad26b> Recharger </button>`),M.value.length>1?t('<button class="bg-zinc-700 text-white px-4 py-2 rounded font-medium hover:bg-zinc-600 transition-colors" data-v-cc3ad26b> Source alternative </button>'):t("\x3c!----\x3e"),t("</div></div></div>")):t("\x3c!----\x3e"),U.value&&M.value.length?(t('<div class="absolute bottom-24 left-4 right-4 bg-black/90 border border-zinc-700 rounded-lg p-4 text-white text-sm z-30 max-h-32 overflow-y-auto" data-v-cc3ad26b><h4 class="font-medium mb-2" data-v-cc3ad26b>Sources disponibles:</h4><div class="space-y-1" data-v-cc3ad26b>\x3c!--[--\x3e'),ssrRenderList(M.value,(e,a)=>{t(`<div class="${ssrRenderClass([e.proxiedUrl===E.value?"bg-violet-600/30 border border-violet-500":"bg-zinc-800/50","flex items-center gap-2 p-2 rounded"])}" data-v-cc3ad26b>`),t(ssrRenderComponent(i,{name:"heroicons:play",class:"w-3 h-3 flex-shrink-0"},null,l)),t(`<span class="font-mono text-xs truncate flex-1" data-v-cc3ad26b>${ssrInterpolate(e.type)} - ${ssrInterpolate(e.url)}</span>`),e.proxiedUrl!==E.value?t('<button class="text-xs bg-white text-black px-2 py-1 rounded hover:bg-zinc-200 transition-colors" data-v-cc3ad26b> Utiliser </button>'):t("\x3c!----\x3e"),t("</div>");}),t(`\x3c!--]--\x3e</div><div class="mt-2 pt-2 border-t border-zinc-600" data-v-cc3ad26b><div class="text-xs text-zinc-400" data-v-cc3ad26b> Langues disponibles: VOSTFR=${ssrInterpolate(ue.value.vostfr)}, VF=${ssrInterpolate(ue.value.vf)}, VA=${ssrInterpolate(ue.value.va)}, VAR=${ssrInterpolate(ue.value.var)}, VKR=${ssrInterpolate(ue.value.vkr)}, VCN=${ssrInterpolate(ue.value.vcn)}, VQC=${ssrInterpolate(ue.value.vqc)}, VF1=${ssrInterpolate(ue.value.vf1)}, VF2=${ssrInterpolate(ue.value.vf2)}, VJ=${ssrInterpolate(ue.value.vj)}</div></div></div>`)):t("\x3c!----\x3e"),ke.value&&ze.value?(t(`<div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 transition-opacity duration-300" data-v-cc3ad26b><div class="bg-black/80 backdrop-blur-sm rounded-lg p-4 text-center text-white" data-v-cc3ad26b><div class="text-sm text-zinc-300 mb-2" data-v-cc3ad26b>${ssrInterpolate("op"===ze.value?"G√©n√©rique de d√©but":"G√©n√©rique de fin")}</div><button class="bg-violet-600 hover:bg-violet-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2 mx-auto" data-v-cc3ad26b>`),t(ssrRenderComponent(i,{name:"heroicons:forward",class:"w-4 h-4"},null,l)),t('<span data-v-cc3ad26b>Sauter</span></button><button class="text-xs text-zinc-400 hover:text-zinc-300 mt-2 block mx-auto transition-colors" data-v-cc3ad26b> Masquer </button></div></div>')):t("\x3c!----\x3e"),t("</div>")),t("</div></div>");}}}),C=L.setup;L.setup=(e,a)=>{const t=useSSRContext();return (t.modules||(t.modules=new Set)).add("pages/watch/[id]/[season]/[lang]/[episode].vue"),C?C(e,a):void 0};const S=Ct(L,[["__scopeId","data-v-cc3ad26b"]]);

export { S as default };
//# sourceMappingURL=_episode_-CR7NXlqO.mjs.map
