import { u as S, _ as $ } from './index-BZnvd90h.mjs';
import { b as Ct, u as Ae, a as Se, _ as bt, n as Oe } from './server.mjs';
import { J } from './CardPoster-BLzLRno_.mjs';
import { defineComponent, ref, watch, computed, unref, withCtx, createTextVNode, createVNode, mergeProps, createBlock, openBlock, Fragment, renderList, toDisplayString, useSSRContext } from 'vue';
import { ssrRenderAttrs, ssrInterpolate, ssrRenderList, ssrRenderComponent, ssrRenderSuspense, ssrRenderAttr, ssrRenderClass, ssrRenderStyle } from 'vue/server-renderer';
import { O, T, j } from './HeroBanner-DB7RgRuh.mjs';
import { u } from './useSearch-BmyD_PFd.mjs';
import '@iconify/vue';
import '@iconify/utils/lib/css/icon';
import './asyncData-BOLdWyFS.mjs';
import 'perfect-debounce';
import '../routes/renderer.mjs';
import 'vue-bundle-renderer/runtime';
import '../nitro/nitro.mjs';
import 'jsonwebtoken';
import 'bcryptjs';
import 'node:http';
import 'node:https';
import 'node:events';
import 'node:buffer';
import 'node:fs';
import 'node:path';
import 'node:crypto';
import '@supabase/supabase-js';
import '@iconify/utils';
import 'consola';
import 'node:url';
import 'ipx';
import 'unhead/server';
import 'devalue';
import 'unhead/plugins';
import 'unhead/utils';
import 'vue-router';
import './fetch-B1uUfs--.mjs';
import '@vue/shared';
import './ssr-DTPz_gAB.mjs';

const D=defineComponent({__name:"ContinueWatchingRow",__ssrInlineRender:true,setup(a){const t=ref([]),i=ref(true);ref("");const r=e=>e.image||"/placeholder-poster.jpg",o=e=>e>=90?"bg-green-500":e>=50?"bg-yellow-500":"bg-blue-500",l=e=>{if(e.toLowerCase().startsWith("saison")){const a=e.match(/saison(\d+)/i);if(a)return `Saison ${a[1]}`}return e};return (a,d,n,b)=>{const f=$;d(ssrRenderComponent(j,mergeProps({title:"Continuer à regarder"},b),{default:withCtx((e,a,d,n)=>{if(!a)return [i.value?(openBlock(),createBlock("div",{key:0,class:"flex gap-5 overflow-x-auto scroll-smooth snap-x snap-mandatory pl-5 md:pl-20 pr-5 md:pr-20 scroll-pl-5 md:scroll-pl-20 scroll-pr-5 md:scroll-pr-20"},[(openBlock(),createBlock(Fragment,null,renderList(8,e=>createVNode("div",{key:e,class:"snap-start shrink-0 rounded-xl border border-zinc-800 bg-zinc-900/40 animate-pulse w-[200px] min-h-[320px]"})),64))])):0===t.value.length?(openBlock(),createBlock("div",{key:1,class:"flex items-center justify-center h-32 text-zinc-400"},[createVNode("p",null,"Aucun contenu en cours")])):(openBlock(),createBlock("div",{key:2,class:"flex gap-5 overflow-x-auto scroll-smooth snap-x snap-mandatory pl-5 md:pl-20 pr-5 md:pr-20 scroll-pl-5 md:scroll-pl-20 scroll-pr-5 md:scroll-pr-20"},[(openBlock(true),createBlock(Fragment,null,renderList(t.value,e=>(openBlock(),createBlock("div",{key:`${e.animeId}-${e.season}-${e.episode}`,class:"snap-start shrink-0 group relative rounded-xl overflow-hidden border border-zinc-800 hover:border-zinc-600 transition-all duration-300 w-[200px] min-h-[320px] flex flex-col cursor-pointer",onClick:a=>(e=>{const a=e.defaultLang||"vostfr";Oe(`/watch/${e.animeId}/${e.season}/${a}/${e.episode}?continue=true`);})(e)},[createVNode("div",{class:"h-[240px] relative overflow-hidden"},[createVNode("img",{src:r(e),alt:`Poster for ${e.title||e.animeId}`,class:"w-[200px] h-[240px] object-cover group-hover:scale-105 transition-transform duration-300"},null,8,["src","alt"]),createVNode("div",{class:"absolute bottom-0 left-0 right-0 h-1 bg-zinc-600"},[createVNode("div",{class:["h-full transition-all duration-300",o(e.progressPercent)],style:{width:e.progressPercent+"%"}},null,6)]),createVNode("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center"},[createVNode("div",{class:"opacity-0 group-hover:opacity-100 transition-opacity duration-300"},[createVNode(f,{name:"heroicons:play",class:"w-12 h-12 text-white drop-shadow-lg"})])])]),createVNode("div",{class:"min-h-[80px] p-3 bg-zinc-900 flex flex-col justify-between"},[createVNode("div",null,[createVNode("h4",{class:"font-medium text-white text-sm mb-1 group-hover:text-violet-400 transition-colors"},toDisplayString(e.title||e.animeId),1),createVNode("p",{class:"text-zinc-400 text-xs mb-1"},toDisplayString(l(e.season))+" • Épisode "+toDisplayString(e.episode),1),createVNode("p",{class:"text-zinc-500 text-xs"},toDisplayString(Math.round(e.progressPercent))+"% vu ",1)])])],8,["onClick"]))),128))]))];i.value?(a(`<div class="flex gap-5 overflow-x-auto scroll-smooth snap-x snap-mandatory pl-5 md:pl-20 pr-5 md:pr-20 scroll-pl-5 md:scroll-pl-20 scroll-pr-5 md:scroll-pr-20"${n}>\x3c!--[--\x3e`),ssrRenderList(8,e=>{a(`<div class="snap-start shrink-0 rounded-xl border border-zinc-800 bg-zinc-900/40 animate-pulse w-[200px] min-h-[320px]"${n}></div>`);}),a("\x3c!--]--\x3e</div>")):0===t.value.length?a(`<div class="flex items-center justify-center h-32 text-zinc-400"${n}><p${n}>Aucun contenu en cours</p></div>`):(a(`<div class="flex gap-5 overflow-x-auto scroll-smooth snap-x snap-mandatory pl-5 md:pl-20 pr-5 md:pr-20 scroll-pl-5 md:scroll-pl-20 scroll-pr-5 md:scroll-pr-20"${n}>\x3c!--[--\x3e`),ssrRenderList(t.value,e=>{a(`<div class="snap-start shrink-0 group relative rounded-xl overflow-hidden border border-zinc-800 hover:border-zinc-600 transition-all duration-300 w-[200px] min-h-[320px] flex flex-col cursor-pointer"${n}><div class="h-[240px] relative overflow-hidden"${n}><img${ssrRenderAttr("src",r(e))}${ssrRenderAttr("alt",`Poster for ${e.title||e.animeId}`)} class="w-[200px] h-[240px] object-cover group-hover:scale-105 transition-transform duration-300"${n}><div class="absolute bottom-0 left-0 right-0 h-1 bg-zinc-600"${n}><div class="${ssrRenderClass([o(e.progressPercent),"h-full transition-all duration-300"])}" style="${ssrRenderStyle({width:e.progressPercent+"%"})}"${n}></div></div><div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center"${n}><div class="opacity-0 group-hover:opacity-100 transition-opacity duration-300"${n}>`),a(ssrRenderComponent(f,{name:"heroicons:play",class:"w-12 h-12 text-white drop-shadow-lg"},null,d,n)),a(`</div></div></div><div class="min-h-[80px] p-3 bg-zinc-900 flex flex-col justify-between"${n}><div${n}><h4 class="font-medium text-white text-sm mb-1 group-hover:text-violet-400 transition-colors"${n}>${ssrInterpolate(e.title||e.animeId)}</h4><p class="text-zinc-400 text-xs mb-1"${n}>${ssrInterpolate(l(e.season))} • Épisode ${ssrInterpolate(e.episode)}</p><p class="text-zinc-500 text-xs"${n}>${ssrInterpolate(Math.round(e.progressPercent))}% vu </p></div></div></div>`);}),a("\x3c!--]--\x3e</div>"));}),_:1},n));}}}),E=D.setup;D.setup=(e,a)=>{const s=useSSRContext();return (s.modules||(s.modules=new Set)).add("components/ContinueWatchingRow.vue"),E?E(e,a):void 0};const F=Object.assign(D,{__name:"ContinueWatchingRow"}),W=defineComponent({__name:"index",__ssrInlineRender:true,setup(s){S({title:"Accueil - Gazes",description:"Découvrez le meilleur de l'animation japonaise et mondiale"});const o=Ae(),d=Se(),c=ref(null),u$1=ref(null),m=ref(false),p=["Action","Aventure","Comédie","Drame","Fantastique","Horreur","Romance","Science-Fiction","Sport"],{query:x,search:g}=u(async e=>{const a=await $fetch("/api/catalogue",{params:{search:e}});return a?.items||[]},{debounceMs:300,minLength:2}),b=String(o.query.q||"");b&&(x.value=b),watch(()=>o.query.q,e=>{const a=String(e||"");a!==x.value&&(x.value=a);}),watch(x,e=>{e!==String(o.query.q||"")&&d.replace({query:e?{q:e}:{}});});const k=computed(()=>!!x.value&&x.value.trim().length>=2),_=computed(()=>(u$1.value?.genres?.filter(Boolean)||[]).slice(0,3).join(" • ")),C=computed(()=>g.loading.value?"Recherche en cours...":g.error.value?"Erreur de recherche":g.isEmpty.value?"Aucun résultat":`Résultats pour "${x.value}"`);return (a,s,t,i)=>{const o=$,d=bt,n=J;s(`<div${ssrRenderAttrs(i)} data-v-15a407e0>`),k.value?(s(`<section class="section px-5 md:px-20" data-v-15a407e0><div class="flex items-center justify-between mb-6" data-v-15a407e0><div data-v-15a407e0><h1 class="text-2xl font-bold mb-2" data-v-15a407e0>${ssrInterpolate(C.value)}</h1><div class="flex items-center gap-4" data-v-15a407e0><button class="btn ghost text-sm" data-v-15a407e0> ← Retour à l&#39;accueil </button>`),unref(g).loading.value?s('<div class="flex items-center gap-2 text-sm text-zinc-400" data-v-15a407e0><div class="w-4 h-4 border-2 border-violet-600 border-t-transparent rounded-full animate-spin" data-v-15a407e0></div> Recherche... </div>'):s("\x3c!----\x3e"),s('</div></div></div><div class="min-h-[400px]" data-v-15a407e0>'),unref(g).loading.value?(s('<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" data-v-15a407e0>\x3c!--[--\x3e'),ssrRenderList(12,e=>{s('<div class="w-40 overflow-hidden rounded-lg border border-zinc-800 bg-zinc-900/50 animate-pulse" data-v-15a407e0><div class="aspect-[3/4] bg-zinc-800" data-v-15a407e0></div><div class="p-3" data-v-15a407e0><div class="h-4 bg-zinc-800 rounded mb-2" data-v-15a407e0></div><div class="h-4 bg-zinc-800 rounded w-3/4" data-v-15a407e0></div></div></div>');}),s("\x3c!--]--\x3e</div>")):unref(g).error.value?(s('<div class="text-center py-16" data-v-15a407e0><div class="mb-4" data-v-15a407e0>'),s(ssrRenderComponent(o,{name:"heroicons:exclamation-triangle",class:"w-16 h-16 text-amber-500 mx-auto mb-4"},null,t)),s(`<h3 class="text-xl font-semibold mb-2" data-v-15a407e0> Erreur de recherche </h3><p class="text-zinc-400 mb-4" data-v-15a407e0>${ssrInterpolate(unref(g).error.value)}</p><button class="btn primary" data-v-15a407e0> Réessayer </button></div></div>`)):unref(g).isEmpty.value?(s('<div class="text-center py-16" data-v-15a407e0><div class="mb-4" data-v-15a407e0>'),s(ssrRenderComponent(o,{name:"heroicons:magnifying-glass",class:"w-16 h-16 text-zinc-500 mx-auto mb-4"},null,t)),s(`<h3 class="text-xl font-semibold mb-2" data-v-15a407e0> Aucun résultat </h3><p class="text-zinc-400 mb-4" data-v-15a407e0> Aucun contenu trouvé pour &quot;${ssrInterpolate(unref(x))}&quot; </p><div class="flex justify-center gap-3" data-v-15a407e0><button class="btn secondary" data-v-15a407e0> Effacer la recherche </button>`),s(ssrRenderComponent(d,{to:"/catalogue",class:"btn primary"},{default:withCtx((e,a,s,t)=>{if(!a)return [createTextVNode(" Parcourir le catalogue ")];a(" Parcourir le catalogue ");}),_:1},t)),s("</div></div></div>")):(s('<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" data-v-15a407e0>\x3c!--[--\x3e'),ssrRenderList(unref(g).results.value,e=>{s(ssrRenderComponent(n,{key:e.id,to:`/anime/${e.id}`,src:e.image,title:e.title,size:"sm"},null,t));}),s("\x3c!--]--\x3e</div>")),s("</div></section>")):(s('<section data-v-15a407e0><div class="relative" data-v-15a407e0>'),!m.value&&c.value&&u$1.value?s(ssrRenderComponent(O,{title:c.value.title,subtitle:_.value,image:u$1.value.banner||c.value.image,"primary-to":`/anime/${c.value.id}`,"secondary-to":`/anime/${c.value.id}`,synopsis:u$1.value.synopsis},null,t)):s('<div class="h-[60vh] md:h-[80vh] lg:h-[90vh] bg-gradient-to-br from-violet-900/20 via-zinc-900 to-zinc-950 flex items-center justify-center" data-v-15a407e0><div class="text-center" data-v-15a407e0><div class="w-16 h-16 border-4 border-violet-600 border-t-transparent rounded-full animate-spin mx-auto mb-4" data-v-15a407e0></div><h2 class="text-xl font-semibold mb-2" data-v-15a407e0>Chargement...</h2><p class="text-zinc-400" data-v-15a407e0>Préparation du contenu</p></div></div>'),s("</div>"),ssrRenderSuspense(s,{fallback:()=>{s('<section class="section" data-v-15a407e0><div class="flex justify-between items-center mb-4 px-20" data-v-15a407e0><h3 class="row-title" data-v-15a407e0>Continuer à regarder</h3></div><div class="relative" data-v-15a407e0><div class="flex gap-5 overflow-x-auto scroll-smooth snap-x snap-mandatory pl-20 pr-20 scroll-pl-20 scroll-pr-20" data-v-15a407e0>\x3c!--[--\x3e'),ssrRenderList(8,e=>{s('<div class="snap-start shrink-0 rounded-xl border border-zinc-800 bg-zinc-900/40 animate-pulse aspect-[9/12] w-[170px]" data-v-15a407e0></div>');}),s("\x3c!--]--\x3e</div></div></section>");},default:()=>{s(ssrRenderComponent(F,{title:"Continuer à regarder","max-items":20},null,t));},_:1}),s('<div class="flex flex-col gap-10 mt-10" data-v-15a407e0>\x3c!--[--\x3e'),ssrRenderList(p,e=>{s("<div data-v-15a407e0>"),ssrRenderSuspense(s,{fallback:()=>{s(`<section class="py-8" data-v-15a407e0><div class="mb-6 flex items-center justify-between px-4 md:px-20" data-v-15a407e0><h3 class="text-xl font-semibold text-white" data-v-15a407e0>${ssrInterpolate(e)}</h3></div><div class="relative" data-v-15a407e0><div class="pointer-events-none absolute inset-y-0 left-0 z-10 w-20 bg-gradient-to-r from-zinc-950 to-transparent" data-v-15a407e0></div><div class="pointer-events-none absolute inset-y-0 right-0 z-10 w-20 bg-gradient-to-l from-zinc-950 to-transparent" data-v-15a407e0></div><div class="flex gap-4 overflow-x-auto scroll-smooth px-4 md:px-20" data-v-15a407e0>\x3c!--[--\x3e`),ssrRenderList(8,e=>{s('<div class="flex-shrink-0 w-40" data-v-15a407e0><div class="aspect-[3/4] rounded-lg bg-zinc-800 animate-pulse" data-v-15a407e0></div><div class="mt-3 p-3" data-v-15a407e0><div class="h-4 bg-zinc-800 rounded mb-2" data-v-15a407e0></div><div class="h-4 bg-zinc-800 rounded w-3/4" data-v-15a407e0></div></div></div>');}),s("\x3c!--]--\x3e</div></div></section>");},default:()=>{s(ssrRenderComponent(T,{title:e,genre:e,"card-size":"sm"},null,t));},_:2}),s("</div>");}),s('\x3c!--]--\x3e</div><section class="section px-5 md:px-20 mt-16" data-v-15a407e0><div class="text-center mb-8" data-v-15a407e0><h2 data-v-15a407e0>Découvrez plus de contenus</h2><p class="muted" data-v-15a407e0>Explorez nos différentes catégories</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-15a407e0>'),s(ssrRenderComponent(d,{to:"/series",class:"card p-6 text-center group hover:border-zinc-600 transition-colors"},{default:withCtx((e,a,s,t)=>{if(!a)return [createVNode("div",{class:"w-16 h-16 mx-auto mb-4 rounded-full bg-violet-700/20 flex items-center justify-center group-hover:bg-violet-700/30 transition-colors"},[createVNode(o,{name:"heroicons:tv",class:"w-8 h-8 text-violet-400"})]),createVNode("h3",{class:"mb-2"},"Séries"),createVNode("p",{class:"muted text-sm"}," Plongez dans des histoires captivantes ")];a(`<div class="w-16 h-16 mx-auto mb-4 rounded-full bg-violet-700/20 flex items-center justify-center group-hover:bg-violet-700/30 transition-colors" data-v-15a407e0${t}>`),a(ssrRenderComponent(o,{name:"heroicons:tv",class:"w-8 h-8 text-violet-400"},null,s,t)),a(`</div><h3 class="mb-2" data-v-15a407e0${t}>Séries</h3><p class="muted text-sm" data-v-15a407e0${t}> Plongez dans des histoires captivantes </p>`);}),_:1},t)),s(ssrRenderComponent(d,{to:"/movies",class:"card p-6 text-center group hover:border-zinc-600 transition-colors"},{default:withCtx((e,a,s,t)=>{if(!a)return [createVNode("div",{class:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-700/20 flex items-center justify-center group-hover:bg-emerald-700/30 transition-colors"},[createVNode(o,{name:"heroicons:film",class:"w-8 h-8 text-emerald-400"})]),createVNode("h3",{class:"mb-2"},"Films"),createVNode("p",{class:"muted text-sm"}," Des chefs-d'œuvre cinématographiques ")];a(`<div class="w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-700/20 flex items-center justify-center group-hover:bg-emerald-700/30 transition-colors" data-v-15a407e0${t}>`),a(ssrRenderComponent(o,{name:"heroicons:film",class:"w-8 h-8 text-emerald-400"},null,s,t)),a(`</div><h3 class="mb-2" data-v-15a407e0${t}>Films</h3><p class="muted text-sm" data-v-15a407e0${t}> Des chefs-d&#39;œuvre cinématographiques </p>`);}),_:1},t)),s("</div></section></section>")),s("</div>");}}}),H=W.setup;W.setup=(e,a)=>{const s=useSSRContext();return (s.modules||(s.modules=new Set)).add("pages/index.vue"),H?H(e,a):void 0};const L=Ct(W,[["__scopeId","data-v-15a407e0"]]);

export { L as default };
//# sourceMappingURL=index-D7bSrw88.mjs.map
