import{ag as e,r as t,a5 as o,k as r,aa as n,ah as i,H as a}from"#entry";import{i as c}from"./BAP8KhUJ.js";function s(e){if("object"!=typeof e)return e;var t,o,r=Object.prototype.toString.call(e);if("[object Object]"===r){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in o=new e.constructor,e)e.hasOwnProperty(t)&&o[t]!==e[t]&&(o[t]=s(e[t]));else for(t in o={},e)"__proto__"===t?Object.defineProperty(o,t,{value:s(e[t]),configurable:!0,enumerable:!0,writable:!0}):o[t]=s(e[t]);return o}if("[object Array]"===r){for(t=e.length,o=Array(t);t--;)o[t]=s(e[t]);return o}return"[object Set]"===r?(o=new Set,e.forEach(function(e){o.add(s(e))}),o):"[object Map]"===r?(o=new Map,e.forEach(function(e,t){o.set(s(t),s(e))}),o):"[object Date]"===r?new Date(+e):"[object RegExp]"===r?((o=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,o):"[object DataView]"===r?new e.constructor(s(e.buffer)):"[object ArrayBuffer]"===r?e.slice(0):"Array]"===r.slice(-6)?new e.constructor(e):e}function l(e){return e.includes("%")?decodeURIComponent(e):e}function u(e,t){try{return t(e)}catch{return e}}const f=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function d(e,t,o){const r=o||{},n=r.encode||encodeURIComponent;if("function"!=typeof n)throw new TypeError("option encode is invalid");if(!f.test(e))throw new TypeError("argument name is invalid");const i=n(t);if(i&&!f.test(i))throw new TypeError("argument val is invalid");let a=e+"="+i;if(void 0!==r.maxAge&&null!==r.maxAge){const e=r.maxAge-0;if(Number.isNaN(e)||!Number.isFinite(e))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(e)}if(r.domain){if(!f.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!f.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if(c=r.expires,!("[object Date]"===Object.prototype.toString.call(c)||c instanceof Date)||Number.isNaN(r.expires.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}var c;if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.priority){switch("string"==typeof r.priority?r.priority.toLowerCase():r.priority){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return r.partitioned&&(a+="; Partitioned"),a}const p={path:"/",watch:!0,decode:t=>e(decodeURIComponent(t)),encode:e=>encodeURIComponent("string"==typeof e?e:JSON.stringify(e))},m=globalThis.cookieStore;function h(e,l){const u={...p,...l};u.filter??=t=>t===e;const f=w(u)||{};let h;void 0!==u.maxAge?h=1e3*u.maxAge:u.expires&&(h=u.expires.getTime()-Date.now());const g=void 0!==h&&h<=0,v=g||void 0===f[e]||null===f[e],b=s(g?void 0:f[e]??u.default?.()),x=h&&!g?function(e,a,c){let s,l,u=0;const f=c?t(e):{value:e};n()&&o(()=>{l?.(),clearTimeout(s)});return i((e,t)=>{function o(){u=0,clearTimeout(s);const e=a-u,r=e<y?e:y;s=setTimeout(()=>{if(u+=r,u<a)return o();f.value=void 0,t()},r)}return c&&(l=r(f,t)),{get:()=>(e(),f.value),set(e){o(),f.value=e,t()}}})}(b,h,u.watch&&"shallow"!==u.watch):t(b);{let t=null;try{m||"undefined"==typeof BroadcastChannel||(t=new BroadcastChannel(`nuxt:cookies:${e}`))}catch{}const i=(o=!1)=>{(o||!u.readonly&&!c(x.value,f[e]))&&(!function(e,t,o={}){document.cookie=function(e,t,o={}){if(null==t)return d(e,t,{...o,maxAge:-1});return d(e,t,o)}(e,t,o)}(e,x.value,u),f[e]=s(x.value),t?.postMessage({value:u.encode(x.value)}))},l=t=>{const o=t.refresh?w(u)?.[e]:u.decode(t.value);p=!0,x.value=o,f[e]=s(o),a(()=>{p=!1})};let p=!1;const h=!!n();if(h&&o(()=>{p=!0,i(),t?.close()}),m){const t=t=>{const o=t.changed.find(t=>t.name===e),r=t.deleted.find(t=>t.name===e);o&&l({value:o.value}),r&&l({value:null})};m.addEventListener("change",t),h&&o(()=>m.removeEventListener("change",t))}else t&&(t.onmessage=({data:e})=>l(e));u.watch&&r(x,()=>{p||i()},{deep:"shallow"!==u.watch}),v&&i(v)}return x}function w(e={}){return function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");const o={},r=t||{},n=r.decode||l;let i=0;for(;i<e.length;){const t=e.indexOf("=",i);if(-1===t)break;let a=e.indexOf(";",i);if(-1===a)a=e.length;else if(a<t){i=e.lastIndexOf(";",t-1)+1;continue}const c=e.slice(i,t).trim();if(!r?.filter||r?.filter(c)){if(void 0===o[c]){let r=e.slice(t+1,a).trim();34===r.codePointAt(0)&&(r=r.slice(1,-1)),o[c]=u(r,n)}i=a+1}else i=a+1}return o}(document.cookie,e)}const y=2147483647;export{h as u};
