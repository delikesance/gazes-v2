import{s as e}from"./BAP8KhUJ.js";import{l as a,a0 as t,K as s,a1 as n,a2 as o,a3 as i,a4 as r,M as c,k as u,a5 as l,r as d,a6 as f,a7 as h,H as y,a8 as p,p as _,a9 as v,aa as m,ab as g,ac as D,ad as w}from"#entry";const B={trailing:!0};function b(e,a=25,t={}){if(t={...B,...t},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let s,n,o,i,r=[];const c=(a,s)=>(o=async function(e,a,t){return await e.apply(a,t)}(e,a,s),o.finally(()=>{if(o=null,t.trailing&&i&&!n){const e=c(a,i);return i=null,e}}),o),u=function(...e){return t.trailing&&(i=e),o||new Promise(o=>{const u=!n&&t.leading;clearTimeout(n),n=setTimeout(()=>{n=null;const a=t.leading?s:c(this,e);i=null;for(const e of r)e(a);r=[]},a),u?(s=c(this,e),o(s)):r.push(o)})},l=e=>{e&&(clearTimeout(e),n=null)};return u.isPending=()=>!!n,u.cancel=()=>{l(n),r=[],i=null},u.flush=()=>{if(l(n),!i||o)return;const e=i;return i=null,c(this,e)},u}const x=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],P=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],C=[];class k{_data=new E;_hash=new E([...x]);_nDataBytes=0;_minBufferSize=0;finalize(e){e&&this._append(e);const a=8*this._nDataBytes,t=8*this._data.sigBytes;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[14+(t+64>>>9<<4)]=Math.floor(a/4294967296),this._data.words[15+(t+64>>>9<<4)]=a,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}_doProcessBlock(e,a){const t=this._hash.words;let s=t[0],n=t[1],o=t[2],i=t[3],r=t[4],c=t[5],u=t[6],l=t[7];for(let d=0;d<64;d++){if(d<16)C[d]=0|e[a+d];else{const e=C[d-15],a=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,t=C[d-2],s=(t<<15|t>>>17)^(t<<13|t>>>19)^t>>>10;C[d]=a+C[d-7]+s+C[d-16]}const t=s&n^s&o^n&o,f=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),h=l+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&c^~r&u)+P[d]+C[d];l=u,u=c,c=r,r=i+h|0,i=o,o=n,n=s,s=h+(f+t)|0}t[0]=t[0]+s|0,t[1]=t[1]+n|0,t[2]=t[2]+o|0,t[3]=t[3]+i|0,t[4]=t[4]+r|0,t[5]=t[5]+c|0,t[6]=t[6]+u|0,t[7]=t[7]+l|0}_append(e){"string"==typeof e&&(e=E.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let a,t=this._data.sigBytes/64;t=e?Math.ceil(t):Math.max((0|t)-this._minBufferSize,0);const s=16*t,n=Math.min(4*s,this._data.sigBytes);if(s){for(let e=0;e<s;e+=16)this._doProcessBlock(this._data.words,e);a=this._data.words.splice(0,s),this._data.sigBytes-=n}return new E(a,n)}}class E{words;sigBytes;constructor(e,a){e=this.words=e||[],this.sigBytes=void 0===a?4*e.length:a}static fromUtf8(e){const a=unescape(encodeURIComponent(e)),t=a.length,s=[];for(let n=0;n<t;n++)s[n>>>2]|=(255&a.charCodeAt(n))<<24-n%4*8;return new E(s,t)}toBase64(){const e=[];for(let a=0;a<this.sigBytes;a+=3){const t=(this.words[a>>>2]>>>24-a%4*8&255)<<16|(this.words[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|this.words[a+2>>>2]>>>24-(a+2)%4*8&255;for(let s=0;s<4&&8*a+6*s<8*this.sigBytes;s++)e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(t>>>6*(3-s)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let a=0;a<e.sigBytes;a++){const t=e.words[a>>>2]>>>24-a%4*8&255;this.words[this.sigBytes+a>>>2]|=t<<24-(this.sigBytes+a)%4*8}else for(let a=0;a<e.sigBytes;a+=4)this.words[this.sigBytes+a>>>2]=e.words[a>>>2];this.sigBytes+=e.sigBytes}}function M(a){return t=e(a),(new k).finalize(t).toBase64();var t}function T(e){return a({get:()=>e()?.value,set(a){const t=e();t&&(t.value=a)}})}function A(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=void 0),e._asyncData[a]&&(e._asyncData[a].data.value=_(e._asyncData[a]._default()),e._asyncData[a].error.value=void 0,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}function O(e,t,s,n,o){e.payload._errors[t]??=void 0;const i=n.getCachedData!==R,r=s,c=n.deep?d:f,u=void 0!==o,l=e.hook("app:data:refresh",async e=>{e&&!e.includes(t)||await v.execute({cause:"refresh:hook"})}),v={data:c(u?o:n.default()),pending:a(()=>"pending"===v.status.value),error:h(e.payload._errors,t),status:f("idle"),execute:(...a)=>{const[s,o]=a,i=s&&void 0===o&&"object"==typeof s?s:{};if(e._asyncDataPromises[t]){if("defer"===(i.dedupe??n.dedupe))return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}{const a="cachedData"in i?i.cachedData:n.getCachedData(t,e,{cause:i.cause??"refresh:manual"});if(void 0!==a)return e.payload.data[t]=v.data.value=a,v.error.value=void 0,v.status.value="success",Promise.resolve(a)}v.status.value="pending";const c=new Promise((a,t)=>{try{a(r(e))}catch(s){t(s)}}).then(async a=>{if(c.cancelled)return e._asyncDataPromises[t];let s=a;n.transform&&(s=await n.transform(a)),n.pick&&(s=function(e,a){const t={};for(const s of a)t[s]=e[s];return t}(s,n.pick)),e.payload.data[t]=s,v.data.value=s,v.error.value=void 0,v.status.value="success"}).catch(a=>{if(c.cancelled)return e._asyncDataPromises[t];v.error.value=p(a),v.data.value=_(n.default()),v.status.value="error"}).finally(()=>{c.cancelled||delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=c,e._asyncDataPromises[t]},_execute:b((...e)=>v.execute(...e),0,{leading:!0}),_default:n.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{l(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),i||y(()=>{e._asyncData[t]?._init||(A(e,t),v.execute=()=>Promise.resolve())})}};return v}const z=()=>{},R=(e,a,t)=>a.isHydrating?a.payload.data[e]:"refresh:manual"!==t.cause&&"refresh:hook"!==t.cause?a.static.data[e]:void 0;function U(e,d,f){const[h={},y]="string"==typeof d?[{},d]:[d,f],p=a(()=>t(e)),_=a(()=>t(h.key)||"$f"+M([y,"string"==typeof p.value?p.value:"",...j(h)]));if(!h.baseURL&&"string"==typeof p.value&&"/"===p.value[0]&&"/"===p.value[1])throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:w,lazy:B,default:b,transform:x,pick:P,watch:C,immediate:k,getCachedData:E,deep:U,dedupe:F,...q}=h,H=g({...D,...q,cache:"boolean"==typeof h.cache?void 0:h.cache}),L={server:w,lazy:B,default:b,transform:x,pick:P,immediate:k,getCachedData:E,deep:U,dedupe:F,watch:!1===C?[]:[...C||[],H]};let S;const N=function(...e){const d="string"==typeof e[e.length-1]?e.pop():void 0;f=e[0],h=e[1],!("string"==typeof f||"object"==typeof f&&null!==f||"function"==typeof f&&"function"==typeof h)&&e.unshift(d);var f,h;let[y,p,_={}]=e;const g=a(()=>t(y));if("string"!=typeof g.value)throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if("function"!=typeof p)throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const D=s();_.server??=!0,_.default??=z,_.getCachedData??=R,_.lazy??=!1,_.immediate??=!0,_.deep??=n.deep,_.dedupe??="cancel",_._functionName,D._asyncData[g.value];const w={cause:"initial",dedupe:_.dedupe};D._asyncData[g.value]?._init||(w.cachedData=_.getCachedData(g.value,D,{cause:"initial"}),D._asyncData[g.value]=O(D,g.value,p,_,w.cachedData));const B=D._asyncData[g.value];B._deps++;const b=()=>D._asyncData[g.value].execute(w),x=!1!==_.server&&D.payload.serverRendered;{let e=function(e){const a=D._asyncData[e];a?._deps&&(a._deps--,0===a._deps&&a?._off())};const a=o();if(a&&x&&_.immediate&&!a.sp&&(a.sp=[]),a&&!a._nuxtOnBeforeMountCbs){a._nuxtOnBeforeMountCbs=[];const e=a._nuxtOnBeforeMountCbs;i(()=>{e.forEach(e=>{e()}),e.splice(0,e.length)}),r(()=>e.splice(0,e.length))}const t=a&&(a._nuxtClientOnly||c(v,!1));x&&D.isHydrating&&(B.error.value||void 0!==B.data.value)?B.status.value=B.error.value?"error":"success":a&&(!t&&D.payload.serverRendered&&D.isHydrating||_.lazy)&&_.immediate?a._nuxtOnBeforeMountCbs.push(b):_.immediate&&"success"!==B.status.value&&b();const s=m(),n=u(g,(a,t)=>{if((a||t)&&a!==t){const s=void 0!==D._asyncData[t]?.data.value,n=void 0!==D._asyncDataPromises[t];t&&e(t);const o={cause:"initial",dedupe:_.dedupe};if(!D._asyncData[a]?._init){let e;t&&s?e=D._asyncData[t]?.data.value:(e=_.getCachedData(a,D,{cause:"initial"}),o.cachedData=e),D._asyncData[a]=O(D,a,p,_,e)}D._asyncData[a]._deps++,(_.immediate||s||n)&&D._asyncData[a].execute(o)}},{flush:"sync"}),d=_.watch?u(_.watch,()=>{B._execute({cause:"watch",dedupe:_.dedupe})}):()=>{};s&&l(()=>{n(),d(),e(g.value)})}const P={data:T(()=>D._asyncData[g.value]?.data),pending:T(()=>D._asyncData[g.value]?.pending),status:T(()=>D._asyncData[g.value]?.status),error:T(()=>D._asyncData[g.value]?.error),refresh:(...e)=>D._asyncData[g.value].execute(...e),execute:(...e)=>D._asyncData[g.value].execute(...e),clear:()=>A(D,g.value)},C=Promise.resolve(D._asyncDataPromises[g.value]).then(()=>P);return Object.assign(C,P),C}(!1===C?_.value:_,()=>{S?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),S="undefined"!=typeof AbortController?new AbortController:{};const e=t(h.timeout);let a;return e&&(a=setTimeout(()=>S.abort(new DOMException("Request aborted due to timeout.","AbortError")),e),S.signal.onabort=()=>clearTimeout(a)),(h.$fetch||globalThis.$fetch)(p.value,{signal:S.signal,...H}).finally(()=>{clearTimeout(a)})},L);return N}function j(e){const a=[t(e.method)?.toUpperCase()||"GET",t(e.baseURL)];for(const s of[e.params||e.query]){const e=t(s);if(!e)continue;const n={};for(const[a,s]of Object.entries(e))n[t(a)]=t(s);a.push(n)}if(e.body){const s=t(e.body);if(s)if(s instanceof ArrayBuffer)a.push(M(Object.fromEntries([...new Uint8Array(s).entries()].map(([e,a])=>[e,a.toString()]))));else if(s instanceof FormData){const e={};for(const a of s.entries()){const[t,s]=a;e[t]=s instanceof File?s.name:s}a.push(M(e))}else if(w(s))a.push(M(g(s)));else try{a.push(M(s))}catch{console.warn("[useFetch] Failed to hash body",s)}else a.push(M(s))}return a}export{U as u};
