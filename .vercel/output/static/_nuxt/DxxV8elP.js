import{d as e,r as s,o as a,a4 as t,b as l,a as u,f as n,m as r,h as i,_ as c,t as o,g as m,v as _,u as d,l as v,s as p,w as g,y as f,q as h,c as x,p as b,z as y}from"#entry";import{u as w}from"./B4yXZ5uK.js";const k={class:"user-menu"},S={class:"user-menu__avatar"},j={class:"user-menu__username"},z={key:0,class:"user-menu__dropdown"},L={class:"user-menu__item user-menu__item--user"},A={class:"user-menu__user-info"},C={class:"user-menu__user-name"},E={class:"user-menu__user-email"},F=e({__name:"UserMenu",props:{user:{}},emits:["logout"],setup(e,{emit:_}){const d=_,{logout:v}=w(),p=s(!1),g=()=>{p.value=!p.value},f=async()=>{await v(),p.value=!1,d("logout")},h=e=>{e.target.closest(".user-menu")||(p.value=!1)};return a(()=>{document.addEventListener("click",h)}),t(()=>{document.removeEventListener("click",h)}),(s,a)=>{const t=c;return u(),l("div",k,[n("div",{class:"user-menu__trigger",onClick:g},[n("div",S,[i(t,{name:"heroicons-outline:user",class:"user-menu__icon"})]),n("span",j,o(e.user?.username),1),i(t,{name:"heroicons-outline:chevron-down",class:m(["user-menu__chevron",{"rotate-180":p.value}])},null,8,["class"])]),p.value?(u(),l("div",z,[n("div",L,[n("div",A,[n("div",C,o(e.user?.username),1),n("div",E,o(e.user?.email),1)])]),a[1]||(a[1]=n("hr",{class:"user-menu__divider"},null,-1)),n("button",{onClick:f,class:"user-menu__item user-menu__item--logout"},[i(t,{name:"heroicons-outline:arrow-right-on-rectangle",class:"user-menu__item-icon"}),a[0]||(a[0]=n("span",null,"Se déconnecter",-1))])])):r("",!0)])}}}),H=Object.assign(_(F,[["__scopeId","data-v-58e3e0ac"]]),{__name:"UserMenu"}),M={class:"flex w-full items-center py-3 px-9 gap-10 pl-5 justify-between"},O={class:"flex items-center gap-10"},U={class:"-mb-2 text-xl"},q={class:"flex items-center gap-4"},D={key:0,class:"w-8 h-8 bg-zinc-800 rounded-full animate-pulse"},I={key:2,class:"flex items-center gap-2"},W=e({__name:"SiteHeader",setup(e){const s=d(),t=v(()=>s.path.startsWith("/anime/")),r=v(()=>"/catalogue"===s.path),o=v(()=>"/"===s.path),_=v(()=>"/series"===s.path),y=v(()=>"/movies"===s.path),{user:k,pending:S,checkAuth:j}=w(),z=()=>{};return a(()=>{j()}),(e,s)=>{const a=c,d=f,v=p,w=H;return u(),l("nav",{class:m(["p-10 w-full z-[99] bg-transparent",t.value||r.value?"relative":"absolute top-0 left-0"])},[n("div",M,[n("ul",O,[n("li",U,[i(v,{to:"/catalogue",class:m({"text-violet-400":r.value})},{default:g(()=>[i(d,null,{default:g(()=>[i(a,{name:"heroicons-outline:search"})]),_:1})]),_:1},8,["class"])]),n("li",null,[i(v,{to:"/",class:m({"text-violet-400":o.value})},{default:g(()=>[...s[0]||(s[0]=[h("Accueil",-1)])]),_:1},8,["class"])]),n("li",null,[i(v,{to:"/series",class:m({"text-violet-400":_.value})},{default:g(()=>[...s[1]||(s[1]=[h("Séries",-1)])]),_:1},8,["class"])]),n("li",null,[i(v,{to:"/movies",class:m({"text-violet-400":y.value})},{default:g(()=>[...s[2]||(s[2]=[h("Films",-1)])]),_:1},8,["class"])])]),n("div",q,[i(d,null,{default:g(()=>[b(S)?(u(),l("div",D)):b(k)?(u(),x(w,{key:1,user:b(k),onLogout:z},null,8,["user"])):(u(),l("div",I,[i(v,{to:"/login",class:"btn secondary text-sm"},{default:g(()=>[...s[3]||(s[3]=[h(" Se connecter ",-1)])]),_:1}),i(v,{to:"/register",class:"btn primary text-sm"},{default:g(()=>[...s[4]||(s[4]=[h(" S'inscrire ",-1)])]),_:1})]))]),_:1})])])],2)}}}),Y=Object.assign(W,{__name:"SiteHeader"}),$=e({__name:"default",setup:e=>((new Date).getFullYear(),(e,s)=>{const a=Y;return u(),l("div",null,[i(a),n("main",null,[y(e.$slots,"default")])])})});export{$ as default};
